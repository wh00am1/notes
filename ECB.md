# ECB加密法 & 為何不能用於重要資料的加密

## 原理
![avatar](https://github.com/wh00am1/notes/blob/master/Ecb_decryption.png)

將資料分成很多區塊 每段分開加密

## 實作問題

每段資料所使用的key相同，因此可以使用選擇明文

先加密過一次後，可以使用選擇的密文替換加密密文

假設:siteA使用ECB來確認付錢的資訊

利用ECB把原本的交易資料，可能是

`    amount:4000`

`    count:1`
 
`    id = 3`
   
做加密後:

`   amount:040004`

`   count:010001`

`   id = 030003`

之類的

那麼透過買一些便宜的東西(假設是`id=1`，只要10塊錢)

可以得到一個 `amount`為10的加密值(假設是`0110`)

透過抓包，改包替換amount為`0110`

那麼就可以用10塊錢買到4000塊的東西

## 攻擊

可以使用暴力列舉明文來破解密文

或是使用一樣的key加密一段被選擇的明文來替換密文

來達到攻擊的效果

## Fixing

去用CBC
